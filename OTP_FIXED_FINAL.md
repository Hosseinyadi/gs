# โ ูุดฺฉูุงุช OTP ุญู ุดุฏ

## ๐ง ุชุบุฑุงุช ุงูุฌุงู ุดุฏู

### 1. ูุดฺฉู "ุฎุทุง ุฏุฑ ุงุฑุณุงู ูพุงูฺฉ" ุญู ุดุฏ
**ูุดฺฉู**: ููุช SMS.ir ุฏุฑ ุฏุณุชุฑุณ ูุจูุฏ (ูุดฺฉู ุงูุชุฑูุช/ููุชุฑูฺฏ)ุ ุฎุทุง ูโุฏุงุฏ

**ุฑุงูโุญู**: 
- ุงฺฏุฑ SMS.ir ุฏุฑ ุฏุณุชุฑุณ ูุจุงุดุฏุ ุณุณุชู ุจู ุญุงูุช Mock ูโุฑูุฏ
- ฺฉุฏ OTP ุฏุฑ ูุงฺฏ ุณุฑูุฑ ููุงุด ุฏุงุฏู ูโุดูุฏ
- ฺฉุงุฑุจุฑ ูโุชููู ุจุง ฺฉุฏ ูุงฺฏ ุดุฏู ูุงุฑุฏ ุจุดู

### 2. ููุฏ "ูุงู" ุจุฑุง ูุฑูุฏ ุงุฎุชุงุฑ ุดุฏ
**ูุดฺฉู**: ุจุฑุง ฺฉุงุฑุจุฑุงู ฺฉู ูุจูุงู ุซุจุชโูุงู ฺฉุฑุฏู ุจูุฏูุฏุ ูุงู ุงุฌุจุงุฑ ุจูุฏ

**ุฑุงูโุญู**:
- ุงฺฏุฑ ฺฉุงุฑุจุฑ ุฌุฏุฏ ุงุณุช โ ูุงู ุงุฌุจุงุฑ
- ุงฺฏุฑ ฺฉุงุฑุจุฑ ูุจูุงู ุซุจุชโูุงู ฺฉุฑุฏู โ ูุงู ุงุฎุชุงุฑ (ููุท ุจุฑุง ูุฑูุฏ)

---

## ๐งช ุชุณุช ฺฉุฑุฏู

### ุญุงูุช 1: SMS.ir ฺฉุงุฑ ูโฺฉูุฏ
```bash
# ุงุฑุณุงู OTP
curl -X POST http://localhost:8080/api/auth/send-otp \
  -H "Content-Type: application/json" \
  -d "{\"phone\": \"09123456789\"}"

# ูพุงูฺฉ ุฏุฑุงูุช ูโุดูุฏ
# ฺฉุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ
```

### ุญุงูุช 2: SMS.ir ุฏุฑ ุฏุณุชุฑุณ ูุณุช (Fallback)
```bash
# ุงุฑุณุงู OTP
curl -X POST http://localhost:8080/api/auth/send-otp \
  -H "Content-Type: application/json" \
  -d "{\"phone\": \"09123456789\"}"

# Response:
{
  "success": true,
  "message": "ฺฉุฏ ุชุงุฏ ุงุฑุณุงู ุดุฏ (ุญุงูุช ุชูุณุนู)",
  "expiresIn": 300,
  "debug": {
    "code": "123456",
    "note": "SMS.ir ุฏุฑ ุฏุณุชุฑุณ ูุณุช - ฺฉุฏ ุฏุฑ ูุงฺฏ ุณุฑูุฑ"
  }
}

# ฺฉุฏ ุฏุฑ ูุงฺฏ ุณุฑูุฑ:
๐ฑ [FALLBACK MOCK OTP] to 09123456789: 123456
```

---

## ๐ฑ ุณูุงุฑููุง ูุฎุชูู

### ุณูุงุฑู 1: ฺฉุงุฑุจุฑ ุฌุฏุฏ (ุซุจุชโูุงู)
1. ุดูุงุฑู ููุจุงู ูุงุฑุฏ ูโฺฉูู
2. **ูุงู ูุงุฑุฏ ูโฺฉูู** (ุงุฌุจุงุฑ)
3. ฺฉุฏ OTP ุฏุฑุงูุช ูโฺฉูู
4. ฺฉุฏ ุฑุง ุชุงุฏ ูโฺฉูู
5. ุซุจุชโูุงู ูููู โ

### ุณูุงุฑู 2: ฺฉุงุฑุจุฑ ูุฏู (ูุฑูุฏ)
1. ุดูุงุฑู ููุจุงู ูุงุฑุฏ ูโฺฉูู
2. **ูุงู ุงุฎุชุงุฑ ุงุณุช** (ูโุชููู ุฎุงู ุจุฐุงุฑู)
3. ฺฉุฏ OTP ุฏุฑุงูุช ูโฺฉูู
4. ฺฉุฏ ุฑุง ุชุงุฏ ูโฺฉูู
5. ูุฑูุฏ ูููู โ

### ุณูุงุฑู 3: SMS.ir ูุดฺฉู ุฏุงุฑู
1. ุดูุงุฑู ููุจุงู ูุงุฑุฏ ูโฺฉูู
2. ุณุณุชู ุชูุงุด ูโฺฉูู ุจู SMS.ir ูุตู ุจุดู
3. ุงฺฏุฑ ูููู ูุดุฏุ ุจู ุญุงูุช Mock ูโุฑู
4. ฺฉุฏ ุฏุฑ ูุงฺฏ ุณุฑูุฑ ููุงุด ุฏุงุฏู ูโุดู
5. ฺฉุฏ ุฑุง ุงุฒ ูุงฺฏ ฺฉูพ ฺฉู ู ูุงุฑุฏ ฺฉู
6. ูุฑูุฏ ูููู โ

---

## ๐ ูุดุงูุฏู ูุงฺฏโูุง ุณุฑูุฑ

### ุฏุฑ ุชุฑููุงู:
ููุช OTP ุงุฑุณุงู ูโุดูุ ุงู ูุงฺฏโูุง ุฑู ูโุจู:

```
[Send OTP] Request: { phone: '09123456789', cleanPhone: '09123456789' }
[Send OTP] Generated: { otpCode: '123456', expiresAt: ... }
[Send OTP] Saved to DB: { id: 1, phone: '09123456789', code: '123456' }

# ุงฺฏุฑ SMS.ir ฺฉุงุฑ ฺฉุฑุฏ:
โ [SMS SENT] to 09123456789

# ุงฺฏุฑ SMS.ir ฺฉุงุฑ ูฺฉุฑุฏ:
โ๏ธ [SMS FAILED - Using MOCK]: getaddrinfo ENOTFOUND api.sms.ir
๐ฑ [FALLBACK MOCK OTP] to 09123456789: 123456
```

---

## ๐ฏ ูฺฉุงุช ููู

### 1. ุจุฑุง ุชุณุช ูุญู
- ุงฺฏุฑ SMS.ir ูุดฺฉู ุฏุงุฑูุ ูฺฏุฑุงู ูุจุงุด
- ฺฉุฏ ุฏุฑ ูุงฺฏ ุณุฑูุฑ ููุงุด ุฏุงุฏู ูโุดู
- ุงุฒ ูููู ฺฉุฏ ุจุฑุง ูุฑูุฏ ุงุณุชูุงุฏู ฺฉู

### 2. ุจุฑุง Production
- ูุทูุฆู ุดู ุงูุชุฑูุช ุณุฑูุฑ ุณุงููู
- API Key SMS.ir ูุนุชุจุฑู
- Template ID ุฏุฑุณุชู
- ุงุนุชุจุงุฑ ุญุณุงุจ SMS.ir ฺฉุงูู

### 3. ุฏุจุงฺฏ
- ููุดู ูุงฺฏโูุง ุณุฑูุฑ ุฑู ฺฺฉ ฺฉู
- ุงฺฏุฑ ุฎุทุง ุจูุฏุ ุฌุฒุฆุงุช ฺฉุงูู ููุงุด ุฏุงุฏู ูโุดู
- ฺฉุฏ OTP ููุดู ุฏุฑ ูุงฺฏ ุฐุฎุฑู ูโุดู

---

## ๐ ุงุณุชูุงุฏู

### ุงุฒ ูุฑูุฑฺฏุฑ:
1. ุจุฑู ุจู: http://localhost:5173/auth
2. ุดูุงุฑู ููุจุงู ูุงุฑุฏ ฺฉู
3. ุงฺฏุฑ ฺฉุงุฑุจุฑ ุฌุฏุฏุ ูุงู ูุงุฑุฏ ฺฉู
4. ฺฉุฏ OTP ุฏุฑุงูุช ฺฉู (ุงุฒ ูพุงูฺฉ ุง ูุงฺฏ ุณุฑูุฑ)
5. ฺฉุฏ ุฑุง ูุงุฑุฏ ฺฉู
6. ูุงุฑุฏ ุดู! โ

### ุงุฒ API:
```bash
# 1. ุงุฑุณุงู OTP
curl -X POST http://localhost:8080/api/auth/send-otp \
  -H "Content-Type: application/json" \
  -d "{\"phone\": \"09123456789\"}"

# 2. ุชุงุฏ OTP (ฺฉุงุฑุจุฑ ุฌุฏุฏ - ุจุง ูุงู)
curl -X POST http://localhost:8080/api/auth/verify-otp \
  -H "Content-Type: application/json" \
  -d "{\"phone\": \"09123456789\", \"otp\": \"123456\", \"name\": \"ุนู\"}"

# 3. ุชุงุฏ OTP (ฺฉุงุฑุจุฑ ูุฏู - ุจุฏูู ูุงู)
curl -X POST http://localhost:8080/api/auth/verify-otp \
  -H "Content-Type: application/json" \
  -d "{\"phone\": \"09123456789\", \"otp\": \"123456\"}"
```

---

## โจ ูฺฺฏโูุง ุฌุฏุฏ

1. โ **Fallback ุจู Mock**: ุงฺฏุฑ SMS.ir ฺฉุงุฑ ูฺฉุฑุฏุ ุณุณุชู ุจู ุญุงูุช Mock ูโุฑู
2. โ **ูุงู ุงุฎุชุงุฑ ุจุฑุง ูุฑูุฏ**: ููุท ุจุฑุง ุซุจุชโูุงู ุงุฌุจุงุฑู
3. โ **ูุงฺฏโูุง ฺฉุงูู**: ููู ฺุฒ ูุงฺฏ ูโุดู ุจุฑุง ุฏุจุงฺฏ
4. โ **ฺฉุฏ ุฏุฑ Response**: ุฏุฑ ุญุงูุช Mockุ ฺฉุฏ ุฏุฑ response ุจุฑฺฏุฑุฏููุฏู ูโุดู
5. โ **ูพุงูโูุง ูุงุถุญ**: ฺฉุงุฑุจุฑ ูโูููู ฺู ุงุชูุงู ุงูุชุงุฏู

---

## ๐ ููู ฺ ุขูุงุฏู ุงุณุช!

ุญุงูุง ูโุชูู:
- ุจุง ูุฑ ุดูุงุฑูโุง ุซุจุชโูุงู ฺฉู
- ุจุฏูู ูุงู ูุงุฑุฏ ุจุด (ุงฺฏุฑ ูุจูุงู ุซุจุชโูุงู ฺฉุฑุฏ)
- ุญุช ุงฺฏุฑ SMS.ir ูุดฺฉู ุฏุงุดุชุ ุงุฒ ฺฉุฏ ูุงฺฏ ุงุณุชูุงุฏู ฺฉู
- ุจุฏูู ูฺฏุฑุงู ุชุณุช ฺฉู!

**ุจุฑู ู ุชุณุช ฺฉู! ๐**
