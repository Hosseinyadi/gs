# ุฑุงูููุง ุฑุงูโุงูุฏุงุฒ ูุญุท ุชูุณุนู

## 1. ุชูุธูุงุช ูพุงฺฏุงู ุฏุงุฏู ู ุณุฑูุฑ

### ุงุฌุงุฏ ูุงู `.env` ุฏุฑ ูพูุดู `server`:

```bash
cd server
cp .env.example .env
```

### ูุญุชูุง ูุงู `.env` ุจุฑุง ุชุณุช ูุญู:

```env
# Runtime
NODE_ENV=development
PORT=8080

# Security
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-12345

# CORS / Frontend origins
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000
FRONTEND_URL=http://localhost:5173

# Request body limits
BODY_LIMIT=10mb

# Rate limits
RATE_LIMIT_MAX=100
OTP_RATE_LIMIT_MAX=10
LOGIN_RATE_LIMIT_MAX=50

# OTP mock (ุจุฑุง ุชุณุช ูุญู TRUE ฺฉูุฏ)
OTP_MOCK=true

# Database
# ูพุดโูุฑุถ: server/database/bilflow.db
# DB_PATH=./database/bilflow.db

# SMS provider configuration
SMS_PROVIDER=smsir

# Payamak-panel (ุฏุฑ ุตูุฑุช ุงุณุชูุงุฏู)
SMS_API_TOKEN=
SMS_BASE_URL=https://api.payamak-panel.com/api/SendSMS/SendSMS
SMS_USERNAME=
SMS_PASSWORD=
SMS_FROM=

# sms.ir (ุจุฑุง ุชุณุช ูุงูุน)
SMS_IR_API_KEY=YOUR_SMS_IR_API_KEY_HERE
SMS_IR_VERIFY_URL=https://api.sms.ir/v1/send/verify
SMS_IR_TEMPLATE_ID=178826
# ุจุฑุง ุชุณุช ุจุฏูู ุงุฑุณุงู ูุงูุน SMS
SMS_SANDBOX=false
```

---

## 2. ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ

```bash
# ูุตุจ ูุงุจุณุชฺฏโูุง
cd server
npm install

# ุงุฌุฑุง ุณุฑูุฑ
npm start
```

ุณุฑูุฑ ุฑู `http://localhost:8080` ุงุฌุฑุง ูโุดูุฏ.

---

## 3. ุฑุงูโุงูุฏุงุฒ Frontend

```bash
# ูุตุจ ูุงุจุณุชฺฏโูุง
cd ..
npm install

# ุงุฌุฑุง frontend
npm run dev
```

Frontend ุฑู `http://localhost:5173` ุงุฌุฑุง ูโุดูุฏ.

---

## 4. ุงุฌุงุฏ ุญุณุงุจ ูุฏุฑ ุงููู

### ุฑูุด 1: ุงุฒ ุทุฑู ุฏุชุงุจุณ ูุณุชูู

```bash
cd server
node scripts/create-admin.js
```

ุง ุจู ุตูุฑุช ุฏุณุช ุฏุฑ SQLite:

```sql
-- ุจุงุฒ ฺฉุฑุฏู ุฏุชุงุจุณ
sqlite3 database/bilflow.db

-- ุงุฌุงุฏ ฺฉุงุฑุจุฑ ูุฏุฑ
INSERT INTO users (phone, name, role, is_verified, wallet_balance, created_at)
VALUES ('09123456789', 'ูุฏุฑ ุณุณุชู', 'admin', 1, 0, datetime('now'));

-- ูุดุงูุฏู ฺฉุงุฑุจุฑ ุงุฌุงุฏ ุดุฏู
SELECT * FROM users WHERE role = 'admin';
```

### ุฑูุด 2: ุชุจุฏู ฺฉุงุฑุจุฑ ููุฌูุฏ ุจู ูุฏุฑ

ุจุนุฏ ุงุฒ ุซุจุชโูุงู ูุนูููุ ุฏุฑ ุฏุชุงุจุณ:

```sql
UPDATE users SET role = 'admin' WHERE phone = '09123456789';
```

---

## 5. ุชุณุช ุณูุงุฑููุง ูุฎุชูู

### A. ุชุณุช ุซุจุชโูุงู ู ูุฑูุฏ ฺฉุงุฑุจุฑ ุนุงุฏ

1. ุจู `http://localhost:5173/auth` ุจุฑูุฏ
2. ุดูุงุฑู ููุจุงู ูุงุฑุฏ ฺฉูุฏ (ูุซูุงู `09123456789`)
3. ุจุง `OTP_MOCK=true`ุ ฺฉุฏ OTP ุฏุฑ ฺฉูุณูู ุณุฑูุฑ ููุงุด ุฏุงุฏู ูโุดูุฏ
4. ฺฉุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ ู ูุงุฑุฏ ูพูู ฺฉุงุฑุจุฑ ุดูุฏ

### B. ุชุณุช ูพูู ฺฉุงุฑุจุฑ

ุจุนุฏ ุงุฒ ูุฑูุฏ:
- **ูพุฑููุงู**: ูุฑุงุด ูุงู ู ุงูู
- **ุขฺฏูโูุง ูู**: ุซุจุชุ ูุฑุงุดุ ุญุฐู ุขฺฏู
- **ุนูุงููโููุฏโูุง**: ุงูุฒูุฏู/ุญุฐู ุขฺฏูโูุง ููุฑุฏ ุนูุงูู
- **ุชุฑุงฺฉูุดโูุง**: ูุดุงูุฏู ุชุงุฑุฎฺู ูุงู
- **ุชูุธูุงุช**: ุชุบุฑ ุฑูุฒุ ุฏุงูููุฏ ุฏุงุฏูโูุงุ ุญุฐู ุญุณุงุจ

### C. ุชุณุช ูพูู ูุฏุฑุช

1. ุงุจุชุฏุง ฺฉุงุฑุจุฑ ุฑุง ุจู ูุฏุฑ ุชุจุฏู ฺฉูุฏ (ุฑูุด ุจุงูุง)
2. ุจู `http://localhost:5173/admin` ุจุฑูุฏ
3. ูุงุจูุชโูุง ููุฌูุฏ:
   - **ุฏุงุดุจูุฑุฏ**: ุขูุงุฑ ฺฉู ุณุณุชู
   - **ุขฺฏูโูุง**: ุชุฃุฏุ ุฑุฏุ ูุฑุงุดุ ุญุฐูุ ูฺู ฺฉุฑุฏู
   - **ฺฉุงุฑุจุฑุงู**: ูุดุงูุฏูุ ุจูุงฺฉุ ุชุบุฑ ููุฌูุฏ ฺฉู ูพูู
   - **ฺฉุฏูุง ุชุฎูู**: ุงุฌุงุฏ ู ูุฏุฑุช
   - **ุชูุธูุงุช**: ููุชโฺฏุฐุงุฑุ ุชูุธูุงุช ุนููู
   - **ฺฏุฒุงุฑุดุงุช**: ูุงูุ ฺฉุงุฑุจุฑุงูุ ุขฺฏูโูุง
   - **ุงุฑุงุฆูโุฏููุฏฺฏุงู ุฎุฏูุงุช**: ุชุฃุฏุ ุฑุฏุ ุชุนูู
   - **ูุงฺฏโูุง ููุฒ**: ูุดุงูุฏู ูุนุงูุชโูุง ูุฏุฑุงู

### D. ุชุณุช ฺฉุงููพูููุชโูุง ุฌุฏุฏ ูุฏุฑุช

1. **ูุฑุงุด ุขฺฏู**: `/admin/listings/:id/edit`
2. **ูุฑุงุด ฺฉุงุฑุจุฑ**: `/admin/users/:id/edit`
3. **ูุฏุฑุช ุฑุณุงูู**: `/admin/listings/:id/media`
4. **ูุฑฺฉุฒ ฺฏุฒุงุฑุดโูุง**: `/admin/reports-center`
5. **ุงุฑุณุงู ุงุนูุงู**: `/admin/notifications/broadcast`
6. **ุตูุญุงุช ุงุณุชุงุชฺฉ**: `/admin/static-pages`
7. **ฺฉุชุงุจุฎุงูู ุฑุณุงูู**: `/admin/media-library`
8. **ุจฺฉโุขูพ ู ุจุงุฒุงุจ**: `/admin/backup`
9. **ูุฑฺฉุฒ ุงููุช**: `/admin/security`

---

## 6. ูฺฉุงุช ููู

### ุจุฑุง ุชุณุช ูุญู:
- `OTP_MOCK=true` ุฑุง ูุนุงู ฺฉูุฏ ุชุง ฺฉุฏ OTP ุฏุฑ ฺฉูุณูู ููุงุด ุฏุงุฏู ุดูุฏ
- `NODE_ENV=development` ุจุฑุง ุฏุจุงฺฏ ุจูุชุฑ

### ุจุฑุง ุชุณุช ูุงูุน SMS:
- `SMS_PROVIDER=smsir` ุฑุง ุชูุธู ฺฉูุฏ
- `SMS_IR_API_KEY` ุฑุง ุงุฒ ูพูู SMS.ir ุฏุฑุงูุช ฺฉูุฏ
- `SMS_IR_TEMPLATE_ID=178826` (ูุงูุจ ุดูุง)
- `OTP_MOCK=false` ู `SMS_SANDBOX=false`

### ุฏุณุชุฑุณ ุจู ุฏุชุงุจุณ:
```bash
sqlite3 server/database/bilflow.db
.tables
.schema users
SELECT * FROM users LIMIT 10;
```

---

## 7. ุนุจโุงุจ ุฑุงุฌ

### ุฎุทุง CORS:
- ูุทูุฆู ุดูุฏ `ALLOWED_ORIGINS` ุดุงูู `http://localhost:5173` ุงุณุช

### ุฎุทุง JWT:
- `JWT_SECRET` ุฑุง ุฏุฑ `.env` ุชูุธู ฺฉูุฏ

### ุฎุทุง ุงุฑุณุงู SMS:
- ุจุฑุง ุชุณุช ูุญู: `OTP_MOCK=true`
- ฺฉุฏ OTP ุฏุฑ ฺฉูุณูู ุณุฑูุฑ ููุงุด ุฏุงุฏู ูโุดูุฏ

### ุฎุทุง ุฏุชุงุจุณ:
- ูุทูุฆู ุดูุฏ ูพูุดู `server/database` ูุฌูุฏ ุฏุงุฑุฏ
- ูุงู `bilflow.db` ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงุฌุงุฏ ูโุดูุฏ

---

## 8. ุฏุณุชูุฑุงุช ููุฏ

```bash
# ูพุงฺฉ ฺฉุฑุฏู ุฏุชุงุจุณ ู ุดุฑูุน ุงุฒ ูู
rm server/database/bilflow.db
npm start

# ูุดุงูุฏู ูุงฺฏโูุง ุณุฑูุฑ
cd server
npm start

# ุจูุฏ production
npm run build

# ุงุฌุฑุง ุชุณุชโูุง (ุฏุฑ ุตูุฑุช ูุฌูุฏ)
npm test
```

---

## 9. ุณุงุฎุชุงุฑ URL ูุง ููู

### Frontend:
- ุตูุญู ุงุตู: `http://localhost:5173/`
- ูุฑูุฏ/ุซุจุชโูุงู: `http://localhost:5173/auth`
- ูพูู ฺฉุงุฑุจุฑ: `http://localhost:5173/dashboard`
- ูพูู ูุฏุฑุช: `http://localhost:5173/admin`
- ุซุจุช ุขฺฏู: `http://localhost:5173/post-ad`

### API Endpoints:
- Base URL: `http://localhost:8080/api`
- Auth: `/api/auth/*`
- Listings: `/api/listings/*`
- Admin: `/api/admin/*`

---

**ูฺฉุชู**: ุงู ูุงู ุฑุงูููุง ุฑุง ุญุฐู ูฺฉูุฏ ู ุจุฑุง ูุฑุงุฌุนุงุช ุจุนุฏ ูฺฏู ุฏุงุฑุฏ! ๐
