# 📱 راهنمای سیستم اعلان‌ها و تمدید آگهی

## 🚀 شروع سریع

### 1. اجرای سرورها
```bash
# روش اول: استفاده از فایل bat
restart-servers.bat

# روش دوم: دستی
npm run dev              # Terminal 1
cd server && node server.js  # Terminal 2
```

### 2. دسترسی به سایت
- 🌐 سایت: http://localhost:5173
- 🔧 API: http://localhost:8080
- 🏥 Health: http://localhost:8080/health

---

## 👤 برای کاربران

### مشاهده اعلان‌ها
1. روی **زنگ** در بالای سایت کلیک کنید
2. یا به آدرس `/dashboard/notifications` بروید
3. اعلان‌های خوانده نشده با رنگ آبی نمایش داده می‌شوند

### تمدید آگهی
1. به **داشبورد** بروید
2. روی آگهی مورد نظر کلیک کنید
3. دکمه **تمدید** را بزنید
4. اولین تمدید **رایگان** است
5. تمدیدهای بعدی **50,000 تومان**

### مشاهده آمار
1. در صفحه تمدید، **نمودار آمار** نمایش داده می‌شود
2. می‌توانید آمار 7، 14 یا 30 روز را ببینید
3. شامل: بازدید، کلیک تماس، علاقه‌مندی

---

## 👑 برای ادمین

### ورود به پنل
1. آدرس: http://localhost:5173/admin/login
2. نام کاربری: `admin`
3. رمز عبور: `admin123`

### مدیریت تمدیدها
1. پنل ادمین → تب **"تمدید آگهی‌ها"**
2. درخواست‌های **در انتظار** را ببینید
3. **تایید** یا **رد** کنید
4. دلیل رد را وارد کنید

### تنظیمات
در تب تنظیمات می‌توانید تغییر دهید:
- 💰 قیمت تمدید (پیش‌فرض: 50,000 تومان)
- 📅 مدت اعتبار آگهی (پیش‌فرض: 90 روز)
- 🆓 تعداد تمدید رایگان (پیش‌فرض: 1 بار)
- ⏰ زمان یادآوری (پیش‌فرض: 7 روز قبل)

### عملیات دستی
- **ارسال یادآوری**: به همه کاربران با آگهی در حال انقضا
- **منقضی کردن**: آگهی‌های قدیمی را غیرفعال کنید

---

## 🔔 انواع اعلان‌ها

| نوع | توضیح | آیکون |
|-----|-------|-------|
| تایید آگهی | آگهی شما تایید شد | ✅ |
| رد آگهی | آگهی شما رد شد | ❌ |
| نزدیک به انقضا | 7 روز تا انقضا | ⏰ |
| منقضی شد | آگهی منقضی شد | 🚫 |
| تایید پرداخت | پرداخت تایید شد | 💰 |
| تایید تمدید | تمدید تایید شد | 🔄 |
| رد تمدید | تمدید رد شد | ❌ |

---

## 📊 آمار بازدید

### چه چیزهایی ثبت می‌شود؟
- 👁️ تعداد بازدید
- 📞 کلیک روی شماره تماس
- ❤️ افزودن به علاقه‌مندی
- 📈 نمودار روزانه/هفتگی

### کجا ببینم؟
- در صفحه **تمدید آگهی**
- یا در **داشبورد کاربری**

---

## 🔄 نحوه تمدید

### تمدید رایگان (اولین بار)
1. به صفحه تمدید بروید
2. دکمه **"تمدید رایگان"** را بزنید
3. آگهی **فوراً** تمدید می‌شود (بدون نیاز به تایید ادمین)

### تمدید پولی (بار دوم به بعد)
1. به صفحه تمدید بروید
2. روش پرداخت را انتخاب کنید:
   - کارت به کارت
   - کیف پول
3. شماره پیگیری را وارد کنید
4. منتظر **تایید ادمین** بمانید
5. اعلان تایید/رد دریافت می‌کنید

---

## ⏰ زمان‌بندی خودکار

### هر روز ساعت 8 صبح:
- ✅ آگهی‌های منقضی شده غیرفعال می‌شوند
- 📧 یادآوری به کاربران ارسال می‌شود (7 روز قبل)
- 🧹 اعلان‌های قدیمی پاک می‌شوند (بیش از 30 روز)

---

## 🧪 تست سیستم

### فایل تست
فایل `test-notifications-system.html` را در مرورگر باز کنید:
```
file:///C:/Users/rose/Desktop/site/test-notifications-system.html
```

### تست دستی
1. **اعلان‌ها**: یک آگهی ثبت کنید، ادمین تایید کند، اعلان ببینید
2. **آمار**: یک آگهی را چند بار مشاهده کنید، آمار را ببینید
3. **تمدید**: یک آگهی قدیمی تمدید کنید

---

## ❓ سوالات متداول

### چرا اعلانی نمی‌بینم؟
- مطمئن شوید لاگین کرده‌اید
- سرور Backend باید روشن باشد
- Cache مرورگر را پاک کنید (Ctrl+Shift+R)

### چرا نمی‌توانم تمدید کنم؟
- فقط آگهی‌های **فعال** یا **منقضی** قابل تمدید هستند
- آگهی‌های **در انتظار تایید** یا **رد شده** قابل تمدید نیستند

### چگونه قیمت تمدید را تغییر دهم؟
- پنل ادمین → تمدید آگهی‌ها → تنظیمات
- قیمت جدید را وارد کنید
- ذخیره کنید

### چگونه یادآوری دستی ارسال کنم؟
- پنل ادمین → تمدید آگهی‌ها
- دکمه **"ارسال یادآوری"** را بزنید

---

## 🆘 مشکلات رایج

### خطای 401 (Unauthorized)
- لاگین کنید
- Token منقضی شده، دوباره لاگین کنید

### خطای 500 (Server Error)
- سرور Backend را چک کنید
- لاگ‌های سرور را ببینید

### اعلان‌ها نمایش داده نمی‌شوند
- Cache را پاک کنید
- سرورها را restart کنید

---

## 📞 پشتیبانی

اگر مشکلی داشتید:
1. فایل `🎉_سیستم_اعلان_تمدید_دیپلوی_شد.md` را بخوانید
2. لاگ‌های سرور را چک کنید
3. فایل تست را اجرا کنید

---

**نسخه:** 2.3.0  
**تاریخ:** 2 دسامبر 2025  
**وضعیت:** ✅ آماده استفاده
