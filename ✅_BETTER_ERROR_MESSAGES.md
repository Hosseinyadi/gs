# โ ูพุงูโูุง ุฎุทุง ุจูุชุฑ ู ฺฺฉ Authentication

## ๐ฏ ุชุบุฑุงุช ุงูุฌุงู ุดุฏู:

### 1. ฺฺฉ ฺฉุฑุฏู ูุงฺฏู ูุจู ุงุฒ ุซุจุช ุขฺฏู โ

**ูุจู:**
- ฺฉุงุฑุจุฑ ูโุชูุงูุณุช ุจู ุตูุญู ุซุจุช ุขฺฏู ุจุฑูุฏ
- ููฺฏุงู ุซุจุช ุฎุทุง "Access denied" ูโฺฏุฑูุช

**ุจุนุฏ:**
```typescript
useEffect(() => {
  if (!isAuthenticated) {
    toast.error('ุจุฑุง ุซุจุช ุขฺฏู ุงุจุชุฏุง ุจุงุฏ ูุงุฑุฏ ุดูุฏ');
    navigate('/auth', { 
      state: { from: location.pathname },
      replace: true 
    });
    return;
  }
  loadCategories();
}, [isAuthenticated]);
```

**ูุชุฌู:**
- โ ุงฺฏุฑ ูุงฺฏู ูุณุชุ ููุฑุงู ุจู ุตูุญู ูุงฺฏู ูุฏุงุช ูโุดูุฏ
- โ ุจุนุฏ ุงุฒ ูุงฺฏูุ ุจู ููุงู ุตูุญู ุจุฑูโฺฏุฑุฏุฏ
- โ ูพุงู ูุงุถุญ ููุงุด ุฏุงุฏู ูโุดูุฏ

### 2. ููุงุด ุฏูู ุฏูู ุฎุทุง โ

**ูุจู:**
```
ุฎุทุง ุฏุฑ ุซุจุช ุขฺฏู
```

**ุจุนุฏ:**
```typescript
// ุฎุทุง validation:
ุฎุทุง ุฏุฑ ุงุทูุงุนุงุช ุขฺฏู:
- ุนููุงู ุจุงุฏ ุจู 5 ุชุง 200 ฺฉุงุฑุงฺฉุชุฑ ุจุงุดุฏ
- ููุช ุจุงุฏ ุนุฏุฏ ูุซุจุช ุจุงุดุฏ
- ูููุนุช ูฺฉุงู ุงูุฒุงู ุงุณุช

// ุฎุทุง authentication:
ูุทูุงู ุงุจุชุฏุง ูุงุฑุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ุดูุฏ

// ุฎุทุง ุดุจฺฉู:
ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ. ูุทูุงู ุงุชุตุงู ุงูุชุฑูุช ุฎูุฏ ุฑุง ุจุฑุฑุณ ฺฉูุฏ
```

### 3. ูุฏุฑุช ุฎุทุงูุง ูุฎุชูู โ

```typescript
if (error?.message === 'Access denied. No token provided.') {
  // ูุฏุงุช ุจู ุตูุญู ูุงฺฏู
  toast.error('ูุทูุงู ุงุจุชุฏุง ูุงุฑุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ุดูุฏ');
  navigate('/auth');
}
else if (error?.message === 'Failed to fetch') {
  // ุฎุทุง ุดุจฺฉู
  toast.error('ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ');
}
else if (response.errors) {
  // ุฎุทุง validation
  const errorDetails = response.errors.map(err => err.msg).join('\n');
  toast.error(`ุฎุทุง ุฏุฑ ุงุทูุงุนุงุช ุขฺฏู:\n${errorDetails}`);
}
```

### 4. Console Logs ุจุดุชุฑ ุจุฑุง Debug โ

```typescript
console.log('๐ต Creating listing with data:', listingData);
console.log('๐ต Data types:', {
  title: typeof listingData.title,
  price: typeof listingData.price,
  category_id: typeof listingData.category_id,
  // ...
});
```

## ๐ ุฑูุน ูุดฺฉู "ุงุทูุงุนุงุช ุขฺฏู ูุงูุนุชุจุฑ ุงุณุช"

### ุนูู ุงุญุชูุงู:

#### 1. ููุฏูุง ุฎุงู:
```javascript
// ฺฺฉ ฺฉูุฏ:
console.log('Form data:', form);

// ุจุงุฏ ููู ุงู ููุฏูุง ูพุฑ ุจุงุดูุฏ:
- title โ
- description โ
- category_id โ
- province โ
- type โ
- price (ุงฺฏุฑ priceType === 'fixed') โ
```

#### 2. ููุน ุฏุงุฏู ุงุดุชุจุงู:
```javascript
// ุฏุฑุณุช:
category_id: parseInt(form.category_id)  // number
price: parseFloat(form.price)            // number
tags: JSON.stringify(form.tags)          // string

// ุงุดุชุจุงู:
category_id: form.category_id  // string โ
price: form.price              // string โ
tags: form.tags                // array โ
```

#### 3. ุงุณุชุงู ุฎุงู:
```javascript
// ูุทูุฆู ุดูุฏ ุงุณุชุงู ุงูุชุฎุงุจ ุดุฏู:
if (!form.province) {
  toast.error('ูุทูุงู ุงุณุชุงู ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ');
  return;
}
```

## ๐งช ูุญูู ุชุณุช:

### ุชุณุช 1: ุจุฏูู ูุงฺฏู
```
1. Logout ฺฉูุฏ
2. ุจู /post-ad ุจุฑูุฏ
3. ุจุงุฏ ุจู /auth ูุฏุงุช ุดูุฏ โ
4. ูพุงู: "ุจุฑุง ุซุจุช ุขฺฏู ุงุจุชุฏุง ุจุงุฏ ูุงุฑุฏ ุดูุฏ"
```

### ุชุณุช 2: ุจุง ููุฏูุง ุฎุงู
```
1. ูุงฺฏู ฺฉูุฏ
2. ุจู /post-ad ุจุฑูุฏ
3. ุจุฏูู ูพุฑ ฺฉุฑุฏู ูุฑูุ ุซุจุช ฺฉูุฏ
4. ุจุงุฏ ุฎุทุง ูุงุถุญ ุจุจูุฏ:
   "ูุทูุงู ููุฏูุง ุงุฌุจุงุฑ ุฑุง ูพุฑ ฺฉูุฏ"
```

### ุชุณุช 3: ุจุง ุฏุงุฏูโูุง ฺฉุงูู
```
1. ูุงฺฏู ฺฉูุฏ
2. ูุฑู ุฑุง ฺฉุงูู ูพุฑ ฺฉูุฏ:
   - ุนููุงู: "ุจู ูฺฉุงูฺฉ"
   - ุฏุณุชูโุจูุฏ: ุงูุชุฎุงุจ ฺฉูุฏ
   - ุชูุถุญุงุช: "ุชูุถุญุงุช ฺฉุงูู"
   - ููุช: "5000000"
   - ุงุณุชุงู: "ุชูุฑุงู"
3. ุซุจุช ฺฉูุฏ
4. ุจุงุฏ ูููู ุดูุฏ โ
```

### ุชุณุช 4: ุฎุทุง ุดุจฺฉู
```
1. ุณุฑูุฑ ุฑุง ุฎุงููุด ฺฉูุฏ
2. ุณุน ฺฉูุฏ ุขฺฏู ุซุจุช ฺฉูุฏ
3. ุจุงุฏ ุจุจูุฏ:
   "ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ"
```

## ๐ ฺฺฉโูุณุช ูุจู ุงุฒ ุซุจุช ุขฺฏู:

- [ ] ูุงฺฏู ฺฉุฑุฏูโุงุฏ
- [ ] ุนููุงู ุฑุง ููุดุชูโุงุฏ (ุญุฏุงูู 5 ฺฉุงุฑุงฺฉุชุฑ)
- [ ] ุฏุณุชูโุจูุฏ ุฑุง ุงูุชุฎุงุจ ฺฉุฑุฏูโุงุฏ
- [ ] ุชูุถุญุงุช ุฑุง ููุดุชูโุงุฏ (ุญุฏุงูู 10 ฺฉุงุฑุงฺฉุชุฑ)
- [ ] ููุช ุฑุง ูุงุฑุฏ ฺฉุฑุฏูโุงุฏ (ุง ุชูุงูู ุงูุชุฎุงุจ ฺฉุฑุฏูโุงุฏ)
- [ ] ุงุณุชุงู ุฑุง ุงูุชุฎุงุจ ฺฉุฑุฏูโุงุฏ
- [ ] ููุน ุขฺฏู ุฑุง ุงูุชุฎุงุจ ฺฉุฑุฏูโุงุฏ (ุงุฌุงุฑู/ูุฑูุด)

## ๐ก ูพุงูโูุง ุฎุทุง ุฌุฏุฏ:

### ุฎุทุง Authentication:
```
โ ูุทูุงู ุงุจุชุฏุง ูุงุฑุฏ ุญุณุงุจ ฺฉุงุฑุจุฑ ุฎูุฏ ุดูุฏ
โ ูุฏุงุช ุจู ุตูุญู ูุงฺฏู
```

### ุฎุทุง Validation:
```
โ ุฎุทุง ุฏุฑ ุงุทูุงุนุงุช ุขฺฏู:
   - ุนููุงู ุจุงุฏ ุจู 5 ุชุง 200 ฺฉุงุฑุงฺฉุชุฑ ุจุงุดุฏ
   - ููุช ุจุงุฏ ุนุฏุฏ ูุซุจุช ุจุงุดุฏ
```

### ุฎุทุง ุดุจฺฉู:
```
โ ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ
   ูุทูุงู ุงุชุตุงู ุงูุชุฑูุช ุฎูุฏ ุฑุง ุจุฑุฑุณ ฺฉูุฏ
```

### ุฎุทุง ุนููู:
```
โ ุฎุทุง ุฏุฑ ุซุจุช ุขฺฏู
   [ูพุงู ุฎุทุง ุณุฑูุฑ]
```

## ๐ฏ ููู ุฌุฏุฏ:

```
ฺฉุงุฑุจุฑ ุฑู "ุซุจุช ุขฺฏู" ฺฉูฺฉ ูโฺฉูุฏ
    โ
ฺฺฉ: ูุงฺฏู ุงุณุชุ
    โ ุฎุฑ
    โ ูุฏุงุช ุจู /auth
    โ ูพุงู: "ุจุฑุง ุซุจุช ุขฺฏู ุงุจุชุฏุง ุจุงุฏ ูุงุฑุฏ ุดูุฏ"
    โ ุจูู
ูุฑู ุซุจุช ุขฺฏู ููุงุด ุฏุงุฏู ูโุดูุฏ
    โ
ฺฉุงุฑุจุฑ ูุฑู ุฑุง ูพุฑ ูโฺฉูุฏ
    โ
ฺฉุงุฑุจุฑ ุฑู "ุซุจุช" ฺฉูฺฉ ูโฺฉูุฏ
    โ
ฺฺฉ: ููุฏูุง ูพุฑ ูุณุชูุฏุ
    โ ุฎุฑ
    โ ูพุงู: "ูุทูุงู ููุฏูุง ุงุฌุจุงุฑ ุฑุง ูพุฑ ฺฉูุฏ"
    โ ุจูู
ุงุฑุณุงู ุจู ุณุฑูุฑ
    โ
ููููุ
    โ ุฎุฑ
    โ ููุงุด ุฏูู ุฏูู ุฎุทุง
    โ ุจูู
    โ ูพุงู: "ุขฺฏู ุจุง ููููุช ุซุจุช ุดุฏ"
    โ ูุฏุงุช ุจู dashboard
```

## ๐ ูุชุฌู:

โ ฺฉุงุฑุจุฑ ูุจู ุงุฒ ุซุจุช ุขฺฏู ฺฺฉ ูโุดูุฏ
โ ุงฺฏุฑ ูุงฺฏู ูุณุชุ ุจู ุตูุญู ูุงฺฏู ูโุฑูุฏ
โ ูพุงูโูุง ุฎุทุง ูุงุถุญ ู ููุฏ ูุณุชูุฏ
โ ฺฉุงุฑุจุฑ ูโุฏุงูุฏ ฺู ูุดฺฉู ูุฌูุฏ ุฏุงุฑุฏ
โ Debug ฺฉุฑุฏู ุฑุงุญุชโุชุฑ ุดุฏ

ูููู ุจุงุดุฏ! ๐
