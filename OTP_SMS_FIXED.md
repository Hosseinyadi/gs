# ๐ง ูุดฺฉู OTP ุจุง SMS.ir ุญู ุดุฏ

## โ ุชุบุฑุงุช ุงูุฌุงู ุดุฏู

### 1. ูุงู `.env` ุงุตูุงุญ ุดุฏ
- ูุงู ูุชุบุฑูุง ุจุง ฺฉุฏ ููุงููฺฏ ุดุฏ
- `OTP_MOCK=false` ุจุฑุง ุงุณุชูุงุฏู ุงุฒ SMS ูุงูุน
- ุชูุธูุงุช SMS.ir ุจู ุฏุฑุณุช ุชูุธู ุดุฏ

### 2. ฺฉุฏ `sms.js` ุจูุจูุฏ ุงูุช
- ูุฑูุช ุดูุงุฑู ุชููู ุจุฑุง SMS.ir ุงุตูุงุญ ุดุฏ (09xxxxxxxxx)
- ูุงฺฏโูุง ุจูุชุฑ ุจุฑุง ุฏุจุงฺฏ
- ูุฏุฑุช ุฎุทุง ุจูุจูุฏ ุงูุช

### 3. ุงุณฺฉุฑูพุช ุชุณุช ุงุถุงูู ุดุฏ
- `server/test-otp.js` ุจุฑุง ุชุณุช ุณุฑุน OTP

---

## ๐งช ุชุณุช ฺฉุฑุฏู

### ุฑูุด 1: ุชุณุช ุจุง ุงุณฺฉุฑูพุช
```bash
cd server
node test-otp.js 09123456789
```

ุงู ุงุณฺฉุฑูพุช:
- ุดูุงุฑู ุฑู ุชูุฒ ูโฺฉูู
- OTP ุชููุฏ ูโฺฉูู
- ุชูุธูุงุช ุฑู ฺฺฉ ูโฺฉูู
- SMS ุฑู ุงุฑุณุงู ูโฺฉูู
- ูุชุฌู ุฑู ููุงุด ูโุฏู

### ุฑูุด 2: ุชุณุช ุงุฒ ุทุฑู API

#### ุงุฑุณุงู OTP:
```bash
curl -X POST http://localhost:8080/api/auth/send-otp \
  -H "Content-Type: application/json" \
  -d "{\"phone\": \"09123456789\"}"
```

#### ุชุงุฏ OTP:
```bash
curl -X POST http://localhost:8080/api/auth/verify-otp \
  -H "Content-Type: application/json" \
  -d "{\"phone\": \"09123456789\", \"otp\": \"123456\", \"name\": \"ุชุณุช\"}"
```

---

## ๐ ุชูุธูุงุช SMS.ir

ูุงู `.env` ุดูุง:
```env
SMS_PROVIDER=smsir
SMSIR_API_KEY=CHNIxJncFMxOXQ0CBL7DKoiv90VpGDy7LXcF0sLWvgGXgbDH
SMSIR_TEMPLATE_ID=178826
SMS_SENDER=10008663
OTP_MOCK=false
```

### ูฺฉุงุช ููู:
1. **Template ID**: ุจุงุฏ ุฏุฑ ูพูู SMS.ir ฺฉ ูุงูุจ ุจุง ูพุงุฑุงูุชุฑ `CODE` ุฏุงุดุชู ุจุงุดุฏ
2. **API Key**: ฺฉูุฏ API ุดูุง ุงุฒ ูพูู SMS.ir
3. **ูุฑูุช ุดูุงุฑู**: ุณุณุชู ุฎูุฏฺฉุงุฑ ุดูุงุฑู ุฑู ุจู ูุฑูุช `09xxxxxxxxx` ุชุจุฏู ูโฺฉูู

---

## ๐ ุจุฑุฑุณ ูุงูุจ SMS.ir

ุฏุฑ ูพูู SMS.ir ุจุงุฏ ูุงูุจ ุจุง ุงู ูุดุฎุตุงุช ุฏุงุดุชู ุจุงุดุฏ:

**ุดูุงุณู ูุงูุจ**: 178826

**ูุชู ูุงูุจ**:
```
ฺฉุฏ ุชุงุฏ ุดูุง: [CODE]
ฺฏุงุฑุงฺ ุณูฺฏู
```

ุง ูุฑ ูุชู ูุดุงุจู ฺฉู ูพุงุฑุงูุชุฑ `CODE` ุฏุงุดุชู ุจุงุดุฏ.

---

## ๐ ุนุจโุงุจ

### ุงฺฏุฑ SMS ุงุฑุณุงู ููโุดูุฏ:

1. **ฺฺฉ ฺฉูุฏ API Key ูุนุชุจุฑ ุงุณุช**:
   ```bash
   cd server
   node test-otp.js
   ```

2. **ูุงฺฏโูุง ุณุฑูุฑ ุฑุง ุจุฑุฑุณ ฺฉูุฏ**:
   - ุจุงุฏ ุจุจูุฏ: `[SMS.ir] Sending to 09xxxxxxxxx`
   - ุงฺฏุฑ ุฎุทุง ุฏุงุฑุฏุ ุฌุฒุฆุงุช ุฎุทุง ููุงุด ุฏุงุฏู ูโุดูุฏ

3. **ุชุณุช ุจุง Postman ุง curl**:
   - ุงุจุชุฏุง `/send-otp` ุฑุง ุตุฏุง ุจุฒูุฏ
   - ุณูพุณ ุจุง ฺฉุฏ ุฏุฑุงูุช `/verify-otp` ุฑุง ุตุฏุง ุจุฒูุฏ

4. **ุจุฑุฑุณ ุงุนุชุจุงุฑ ูพูู SMS.ir**:
   - ูุงุฑุฏ ูพูู ุดูุฏ
   - ุงุนุชุจุงุฑ ุญุณุงุจ ุฑุง ฺฺฉ ฺฉูุฏ
   - ูุถุนุช ูุงูุจ ุฑุง ุจุฑุฑุณ ฺฉูุฏ

---

## ๐ฑ ูุฑูุชโูุง ุดูุงุฑู ูพุดุชุจุงู ุดุฏู

ุณุณุชู ุงู ูุฑูุชโูุง ุฑุง ูโูพุฐุฑุฏ ู ุฎูุฏฺฉุงุฑ ุชุจุฏู ูโฺฉูุฏ:

- `09123456789` โ
- `9123456789` โ (0 ุงุถุงูู ูโุดูุฏ)
- `989123456789` โ (ุจู 09... ุชุจุฏู ูโุดูุฏ)
- `+989123456789` โ (ุชูุฒ ู ุชุจุฏู ูโุดูุฏ)
- `0912 345 6789` โ (ูุงุตููโูุง ุญุฐู ูโุดููุฏ)

---

## โจ ูฺฺฏโูุง ุฌุฏุฏ

1. **ูุงฺฏโูุง ฺฉุงูู**: ุชูุงู ูุฑุงุญู ุงุฑุณุงู SMS ูุงฺฏ ูโุดูุฏ
2. **ูุฏุฑุช ุฎุทุง**: ุฎุทุงูุง SMS.ir ุจู ุฏุฑุณุช ููุงุด ุฏุงุฏู ูโุดูุฏ
3. **ุชุณุช ุขุณุงู**: ุงุณฺฉุฑูพุช ุชุณุช ุจุฑุง ุจุฑุฑุณ ุณุฑุน
4. **ูุฑูุช ุฎูุฏฺฉุงุฑ**: ุดูุงุฑูโูุง ุฎูุฏฺฉุงุฑ ุจู ูุฑูุช ุตุญุญ ุชุจุฏู ูโุดููุฏ

---

## ๐ ุงุณุชูุงุฏู ุฏุฑ Production

ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ ูุญุท ูุงูุน:

1. `OTP_MOCK=false` ุฑุง ุชูุธู ฺฉูุฏ
2. API Key ูุนุชุจุฑ ุงุฒ SMS.ir ุฏุฑุงูุช ฺฉูุฏ
3. Template ID ุตุญุญ ุฑุง ูุงุฑุฏ ฺฉูุฏ
4. ุงุนุชุจุงุฑ ุญุณุงุจ SMS.ir ุฑุง ฺฺฉ ฺฉูุฏ
5. ุณุฑูุฑ ุฑุง ุฑโุงุณุชุงุฑุช ฺฉูุฏ

---

## ๐ ูพุดุชุจุงู

ุงฺฏุฑ ูุดฺฉู ุฏุงุดุชุฏ:
1. ูุงฺฏโูุง ุณุฑูุฑ ุฑุง ุจุฑุฑุณ ฺฉูุฏ
2. ุงุณฺฉุฑูพุช ุชุณุช ุฑุง ุงุฌุฑุง ฺฉูุฏ
3. ุชูุธูุงุช `.env` ุฑุง ุฏูุจุงุฑู ฺฺฉ ฺฉูุฏ
4. ุจุง ูพุดุชุจุงู SMS.ir ุชูุงุณ ุจฺฏุฑุฏ
