<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ú†Ú© Ú©Ø±Ø¯Ù† ÙˆØ¶Ø¹ÛŒØª Ù„Ø§Ú¯ÛŒÙ†</title>
    <style>
        body {
            font-family: Tahoma, Arial, sans-serif;
            padding: 20px;
            direction: rtl;
        }
        .box {
            background: #f5f5f5;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .warning { background: #fff3cd; color: #856404; }
        button {
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            font-size: 16px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        pre {
            background: #fff;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ” Ú†Ú© Ú©Ø±Ø¯Ù† ÙˆØ¶Ø¹ÛŒØª Ù„Ø§Ú¯ÛŒÙ†</h1>
    
    <div id="status"></div>
    
    <div style="margin: 20px 0;">
        <button onclick="checkAuth()">Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¬Ø¯Ø¯</button>
        <button onclick="clearAuth()">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Token</button>
        <button onclick="window.location.href='http://localhost:5173/auth'">Ø±ÙØªÙ† Ø¨Ù‡ ØµÙØ­Ù‡ Ù„Ø§Ú¯ÛŒÙ†</button>
    </div>

    <script>
        function checkAuth() {
            const statusDiv = document.getElementById('status');
            
            // Ú†Ú© Ú©Ø±Ø¯Ù† token
            const token = localStorage.getItem('token');
            const user = localStorage.getItem('user');
            
            if (!token) {
                statusDiv.innerHTML = `
                    <div class="box error">
                        <h2>âŒ Ø´Ù…Ø§ Ù„Ø§Ú¯ÛŒÙ† Ù†ÛŒØ³ØªÛŒØ¯!</h2>
                        <p><strong>Ù…Ø´Ú©Ù„:</strong> Token Ø¯Ø± localStorage ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</p>
                        <p><strong>Ø±Ø§Ù‡â€ŒØ­Ù„:</strong></p>
                        <ol>
                            <li>Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ "Ø±ÙØªÙ† Ø¨Ù‡ ØµÙØ­Ù‡ Ù„Ø§Ú¯ÛŒÙ†" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</li>
                            <li>Ø¨Ø§ Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø®ÙˆØ¯ Ù„Ø§Ú¯ÛŒÙ† Ú©Ù†ÛŒØ¯</li>
                            <li>Ø¨Ø¹Ø¯ Ø§Ø² Ù„Ø§Ú¯ÛŒÙ†ØŒ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¢Ú¯Ù‡ÛŒ Ø«Ø¨Øª Ú©Ù†ÛŒØ¯</li>
                        </ol>
                    </div>
                `;
                return;
            }
            
            // Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª
            let userInfo = 'Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª';
            try {
                const userData = JSON.parse(user);
                userInfo = `
                    <pre>${JSON.stringify(userData, null, 2)}</pre>
                `;
            } catch (e) {
                userInfo = user || 'Ø®Ø§Ù„ÛŒ';
            }
            
            statusDiv.innerHTML = `
                <div class="box success">
                    <h2>âœ… Ø´Ù…Ø§ Ù„Ø§Ú¯ÛŒÙ† Ù‡Ø³ØªÛŒØ¯!</h2>
                    <p><strong>Token:</strong></p>
                    <pre>${token.substring(0, 50)}...</pre>
                    
                    <p><strong>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±:</strong></p>
                    ${userInfo}
                    
                    <p style="margin-top: 20px;">
                        <strong>âœ… Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¢Ú¯Ù‡ÛŒ Ø«Ø¨Øª Ú©Ù†ÛŒØ¯</strong>
                    </p>
                </div>
                
                <div class="box warning">
                    <h3>âš ï¸ Ø§Ú¯Ø± Ù‡Ù†ÙˆØ² Ø®Ø·Ø§ Ù…ÛŒâ€ŒÚ¯ÛŒØ±ÛŒØ¯:</h3>
                    <ol>
                        <li>ØµÙØ­Ù‡ Ø±Ø§ Ø±ÙØ±Ø´ Ú©Ù†ÛŒØ¯ (Ctrl+F5)</li>
                        <li>Ø§Ú¯Ø± Ø¨Ø§Ø² Ù‡Ù… Ø®Ø·Ø§ Ø¯Ø§Ø¯ØŒ Logout Ú©Ù†ÛŒØ¯ Ùˆ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Login Ú©Ù†ÛŒØ¯</li>
                        <li>Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ø³Ø±ÙˆØ± backend Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ Ø§Ø³Øª</li>
                    </ol>
                </div>
            `;
        }
        
        function clearAuth() {
            if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Token Ø±Ø§ Ù¾Ø§Ú© Ú©Ù†ÛŒØ¯ØŸ')) {
                localStorage.removeItem('token');
                localStorage.removeItem('user');
                alert('Token Ù¾Ø§Ú© Ø´Ø¯. Ø­Ø§Ù„Ø§ Ø¨Ø§ÛŒØ¯ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ù„Ø§Ú¯ÛŒÙ† Ú©Ù†ÛŒØ¯.');
                checkAuth();
            }
        }
        
        // Ú†Ú© Ø®ÙˆØ¯Ú©Ø§Ø± Ù‡Ù†Ú¯Ø§Ù… Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ
        window.onload = checkAuth;
    </script>
</body>
</html>
