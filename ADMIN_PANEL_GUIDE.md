# ๐๏ธ ุฑุงูููุง ฺฉุงูู ูพูู ูุฏุฑุช ฺฏุงุฑุงฺ ุณูฺฏู

## ๐ ููุฑุณุช ูุทุงูุจ
1. [ูุตุจ ู ุฑุงูโุงูุฏุงุฒ](#ูุตุจ-ู-ุฑุงูโุงูุฏุงุฒ)
2. [ุณุงุฎุชุงุฑ ุฏุชุงุจุณ](#ุณุงุฎุชุงุฑ-ุฏุชุงุจุณ)
3. [API Endpoints](#api-endpoints)
4. [ุณุทูุญ ุฏุณุชุฑุณ](#ุณุทูุญ-ุฏุณุชุฑุณ)
5. [ูุงุจูุชโูุง ูพูู](#ูุงุจูุชโูุง-ูพูู)

---

## ๐ ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### ูุฑุญูู 1: ุงุฌุฑุง Migration ุฏุชุงุจุณ

```bash
cd server
node database/migrate-admin.js
```

ุงู ุฏุณุชูุฑ ุฌุฏุงูู ุฒุฑ ุฑุง ุงุฌุงุฏ ูโฺฉูุฏ:
- `admin_roles` - ููุดโูุง ุงุฏูู
- `system_settings` - ุชูุธูุงุช ุณุณุชู
- `discount_codes` - ฺฉุฏูุง ุชุฎูู
- `discount_usage` - ุงุณุชูุงุฏู ุงุฒ ฺฉุฏูุง
- `user_wallets` - ฺฉู ูพูู ฺฉุงุฑุจุฑุงู
- `transactions` - ุชุฑุงฺฉูุดโูุง ูุงู
- `audit_logs` - ูุงฺฏ ูุนุงูุชโูุง ุงุฏูู
- `service_providers` - ุงุฑุงุฆูโุฏููุฏฺฏุงู ุฎุฏูุงุช/ูุทุนุงุช
- `featured_listings` - ุขฺฏูโูุง ูฺู
- `system_announcements` - ุงุนูุงูุงุช ุนููู

### ูุฑุญูู 2: ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ

```bash
npm start
```

ุณุฑูุฑ ุฑู ูพูุฑุช 8080 ุงุฌุฑุง ูโุดูุฏ.

---

## ๐๏ธ ุณุงุฎุชุงุฑ ุฏุชุงุจุณ

### ุฌุฏุงูู ุงุตู

#### 1. admin_roles
```sql
- id: ุดูุงุณู ููุด
- name: ูุงู ุงูฺฏูุณ (super_admin, content_manager, support)
- name_fa: ูุงู ูุงุฑุณ
- permissions: ุขุฑุงู JSON ุงุฒ ูุฌูุฒูุง
```

#### 2. system_settings
```sql
- setting_key: ฺฉูุฏ ุชูุธู (ูุซู featured_ad_daily_price)
- setting_value: ููุฏุงุฑ ุชูุธู
- setting_type: ููุน (string, number, boolean, json)
- category: ุฏุณุชูโุจูุฏ (pricing, general, listings, payment)
```

#### 3. discount_codes
```sql
- code: ฺฉุฏ ุชุฎูู (ููฺฉ)
- type: ููุน (percentage, fixed)
- value: ููุฏุงุฑ ุชุฎูู
- scope: ุญูุฒู (featured, wallet, all)
- max_usage: ุญุฏุงฺฉุซุฑ ุชุนุฏุงุฏ ุงุณุชูุงุฏู
- per_user_limit: ูุญุฏูุฏุช ูุฑ ฺฉุงุฑุจุฑ
```

#### 4. service_providers
```sql
- business_name: ูุงู ฺฉุณุจโูฺฉุงุฑ
- business_type: ููุน (parts, services)
- status: ูุถุนุช (pending, approved, rejected, suspended)
- rejection_reason: ุฏูู ุฑุฏ
```

#### 5. audit_logs
```sql
- admin_id: ุดูุงุณู ุงุฏูู
- action: ููุน ุนูู (approve_listing, update_setting, etc.)
- target_type: ููุน ูุฏู (listing, user, setting)
- target_id: ุดูุงุณู ูุฏู
- details: ุฌุฒุฆุงุช JSON
- ip_address: ุขโูพ
```

---

## ๐ API Endpoints

### ๐ ุงุญุฑุงุฒ ููุช
```
POST /api/auth/admin/login
Body: { username, password }
```

### โ๏ธ ุชูุธูุงุช ุณุณุชู
```
GET    /api/admin/settings              # ุฏุฑุงูุช ููู ุชูุธูุงุช
GET    /api/admin/settings/:key         # ุฏุฑุงูุช ฺฉ ุชูุธู
PUT    /api/admin/settings/:key         # ุจุฑูุฒุฑุณุงู ุชูุธู (ููุท ุณููพุฑ ุงุฏูู)
POST   /api/admin/settings/bulk-update  # ุจุฑูุฒุฑุณุงู ุฏุณุชูโุฌูุน
GET    /api/admin/settings/:key/history # ุชุงุฑุฎฺู ุชุบุฑุงุช
```

### ๐ ฺฉุฏูุง ุชุฎูู
```
GET    /api/admin/discounts             # ูุณุช ฺฉุฏูุง
GET    /api/admin/discounts/:id         # ุฌุฒุฆุงุช ฺฉุฏ
POST   /api/admin/discounts             # ุงุฌุงุฏ ฺฉุฏ ุฌุฏุฏ
PUT    /api/admin/discounts/:id         # ุจุฑูุฒุฑุณุงู ฺฉุฏ
DELETE /api/admin/discounts/:id         # ุญุฐู ฺฉุฏ
POST   /api/admin/discounts/validate    # ุงุนุชุจุงุฑุณูุฌ ฺฉุฏ
```

### ๐ ฺฏุฒุงุฑุดโูุง
```
GET /api/admin/reports/financial        # ฺฏุฒุงุฑุด ูุงู
GET /api/admin/reports/users            # ฺฏุฒุงุฑุด ฺฉุงุฑุจุฑุงู
GET /api/admin/reports/listings         # ฺฏุฒุงุฑุด ุขฺฏูโูุง
GET /api/admin/reports/export/:type     # ุฎุฑูุฌ CSV
```

### ๐ชต Audit Logs
```
GET /api/admin/audit                    # ูุณุช ูุงฺฏโูุง (ููุท ุณููพุฑ ุงุฏูู)
GET /api/admin/audit/summary            # ุฎูุงุตู ูุนุงูุชโูุง
```

### ๐ฅ ุงุฑุงุฆูโุฏููุฏฺฏุงู ุฎุฏูุงุช
```
GET  /api/admin/providers               # ูุณุช ุงุฑุงุฆูโุฏููุฏฺฏุงู
GET  /api/admin/providers/:id           # ุฌุฒุฆุงุช ุงุฑุงุฆูโุฏููุฏู
POST /api/admin/providers/:id/approve   # ุชุฃุฏ
POST /api/admin/providers/:id/reject    # ุฑุฏ
POST /api/admin/providers/:id/suspend   # ุชุนูู
GET  /api/admin/providers/stats/overview # ุขูุงุฑ
```

---

## ๐ ุณุทูุญ ุฏุณุชุฑุณ

### 1. ุณููพุฑ ุงุฏูู (Super Admin)
- โ ุฏุณุชุฑุณ ฺฉุงูู ุจู ููู ุจุฎุดโูุง
- โ ูุฏุฑุช ุณุงุฑ ุงุฏููโูุง
- โ ุชุบุฑ ุชูุธูุงุช ุณุณุชู
- โ ูุดุงูุฏู audit logs
- โ ูุฏุฑุช ูุงู

### 2. ูุฏุฑ ูุญุชูุง (Content Manager)
- โ ุชุฃุฏ/ุฑุฏ ุขฺฏูโูุง
- โ ูุฏุฑุช ฺฉุงุฑุจุฑุงู
- โ ูุดุงูุฏู ฺฏุฒุงุฑุดโูุง
- โ ุชุบุฑ ุชูุธูุงุช
- โ ูุฏุฑุช ูุงู

### 3. ูพุดุชุจุงู (Support)
- โ ูุดุงูุฏู ุฏุงุดุจูุฑุฏ
- โ ูุดุงูุฏู ุขฺฏูโูุง ู ฺฉุงุฑุจุฑุงู
- โ ูพุงุณุฎ ุจู ฺฏุฒุงุฑุดโูุง
- โ ุชุฃุฏ/ุฑุฏ ุขฺฏู
- โ ุชุบุฑ ุชูุธูุงุช

---

## ๐ฏ ูุงุจูุชโูุง ูพูู

### ๐ ุฏุงุดุจูุฑุฏ ุงุตู
- ุขูุงุฑ ูุญุธูโุง (ฺฉุงุฑุจุฑุงูุ ุขฺฏูโูุงุ ุฏุฑุขูุฏ)
- ูููุฏุงุฑูุง ุชุนุงูู
- ูุนุงูุชโูุง ุงุฎุฑ
- ุฏุณุชุฑุณ ุณุฑุน ุจู ุนููุงุช

### ๐ ูุฏุฑุช ุขฺฏูโูุง
- ููุชุฑ ูพุดุฑูุชู (ูุถุนุชุ ุฏุณุชูุ ุชุงุฑุฎ)
- ุฌุณุชโูุฌู ุฒูุฏู
- ุชุฃุฏ/ุฑุฏ ุจุง ุฏูู
- ูุฑุงุด ูุณุชูู
- ุงุฑุชูุง ุจู ูฺู (ุฑุงฺฏุงู ุจุฑุง ฺฉุงุฑุจุฑ)
- ูุดุงูุฏู ุขูุงุฑ ุจุงุฒุฏุฏ

### ๐ฅ ูุฏุฑุช ฺฉุงุฑุจุฑุงู
- ูุณุช ฺฉุงูู ฺฉุงุฑุจุฑุงู
- ูุณุฏูุฏ/ูุนุงูโุณุงุฒ
- ุชูุธู ุฏุณุช ฺฉู ูพูู
- ูุดุงูุฏู ุชูุงู ุขฺฏูโูุง ฺฉุงุฑุจุฑ
- ุชุงุฑุฎฺู ูุนุงูุช

### โ๏ธ ุชูุธูุงุช ุณุณุชู (ูพูุง)

#### ููุชโฺฏุฐุงุฑ
- `featured_ad_daily_price`: ููุช ุฑูุฒุงูู ุขฺฏู ูฺู
- `featured_ad_weekly_price`: ููุช ููุชฺฏ
- `featured_ad_monthly_price`: ููุช ูุงูุงูู
- `extra_ad_price`: ููุช ุขฺฏู ุงุถุงู
- `free_ads_quota`: ุชุนุฏุงุฏ ุขฺฏู ุฑุงฺฏุงู
- `min_wallet_charge`: ุญุฏุงูู ุดุงุฑฺ ฺฉู ูพูู
- `transaction_fee_percent`: ฺฉุงุฑูุฒุฏ ุชุฑุงฺฉูุด

#### ุนููู
- `site_name`: ูุงู ุณุงุช
- `support_phone`: ุดูุงุฑู ูพุดุชุจุงู
- `support_email`: ุงูู ูพุดุชุจุงู
- `maintenance_mode`: ุญุงูุช ุชุนูุฑุงุช
- `service_provider_contact`: ุดูุงุฑู ุชูุงุณ ุงุฑุงุฆูโุฏููุฏฺฏุงู

#### ุขฺฏูโูุง
- `listing_expiry_days`: ูุฏุช ุงููุถุง ุขฺฏู
- `max_images_per_listing`: ุญุฏุงฺฉุซุฑ ุชุตูุฑ
- `require_admin_approval`: ุงูุฒุงู ุจูุฏู ุชุฃุฏ ุงุฏูู
- `auto_approve_verified_users`: ุชุฃุฏ ุฎูุฏฺฉุงุฑ ฺฉุงุฑุจุฑุงู ุชุฃุฏ ุดุฏู

#### ูพุฑุฏุงุฎุช
- `zarinpal_merchant_id`: Merchant ID
- `zarinpal_sandbox`: ุญุงูุช ุชุณุช

### ๐ ูุฏุฑุช ฺฉุฏูุง ุชุฎูู
- ุณุงุฎุช ฺฉุฏ ุจุง ุชูุธูุงุช ฺฉุงูู
- ููุน: ุฏุฑุตุฏ ุง ูุจูุบ
- ูุญุฏูุฏุช ุงุณุชูุงุฏู (ฺฉู ู per-user)
- ุจุงุฒู ุฒูุงู ุงุนุชุจุงุฑ
- ุญูุฒู ฺฉุงุฑุจุฑุฏ (ุขฺฏู ูฺูุ ฺฉู ูพููุ ููู)
- ุขูุงุฑ ุงุณุชูุงุฏู ูุญุธูโุง
- ุบุฑูุนุงู/ูุนุงูโุณุงุฒ

### ๐ ฺฏุฒุงุฑุดโูุง ูุงู
- ฺฏุฒุงุฑุด ุฏุฑุขูุฏ ุจุง ูููุฏุงุฑ
- ุชูฺฉฺฉ ููุจุน ุฏุฑุขูุฏ
- ฺฏุฒุงุฑุด ุฑุดุฏ ฺฉุงุฑุจุฑุงู
- ฺฏุฒุงุฑุด ุขฺฏูโูุง ุจู ุชูฺฉฺฉ ุฏุณุชู
- ุฎุฑูุฌ CSV/Excel

### ๐ ูุฏุฑุช ุงุฑุงุฆูโุฏููุฏฺฏุงู ุฎุฏูุงุช/ูุทุนุงุช
- ุฏุฑุงูุช ุฏุฑุฎูุงุณุชโูุง ุฌุฏุฏ
- ุจุฑุฑุณ ูุฏุงุฑฺฉ
- ุชุฃุฏ ุจุง ุงุฑุณุงู ุดูุงุฑู ุชูุงุณ
- ุฑุฏ ุจุง ุฐฺฉุฑ ุฏูู
- ุชุนูู ุฏุฑ ุตูุฑุช ุชุฎูู
- ุขูุงุฑ ุงุฑุงุฆูโุฏููุฏฺฏุงู

### ๐ชต Audit Trail (ููุท ุณููพุฑ ุงุฏูู)
- ุซุจุช ุฎูุฏฺฉุงุฑ ุชูุงู ุนููุงุช
- ุงุทูุงุนุงุช ฺฉุงูู (ุฒูุงูุ ุงุฏููุ ุนููุ ูุฏูุ IP)
- ุฌุณุชโูุฌู ูพุดุฑูุชู
- ููุชุฑ ุจุฑ ุงุณุงุณ ุงุฏููุ ููุน ุนููุ ุชุงุฑุฎ
- ุฎูุงุตู ูุนุงูุช ุฑูุฒุงูู

### ๐๏ธ ุงุจุฒุงุฑูุง ุฌุงูุจ
- ููฺฏุงูโุณุงุฒ ุงุณุชุงูโูุง ู ุดูุฑูุง
- ูพุงฺฉโุณุงุฒ ุชุตุงูุฑ ุจโุงุณุชูุงุฏู
- ุงุฑุณุงู ุงุนูุงู ุนููู
- ูุฏุฑุช cache

---

## ๐ ุงููุช

### Audit Logging
ุชูุงู ุนููุงุช ุงุฏููโูุง ุซุจุช ูโุดูุฏ:
- ูุฑูุฏ/ุฎุฑูุฌ
- ุชุฃุฏ/ุฑุฏ ุขฺฏู
- ุชุบุฑ ุชูุธูุงุช
- ูุฏุฑุช ฺฉุงุฑุจุฑุงู
- ุนููุงุช ูุงู

### Rate Limiting
- ูุญุฏูุฏุช ุฏุฑุฎูุงุณุช ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุณูุก ุงุณุชูุงุฏู
- ูุญุฏูุฏุช ูฺู ุจุฑุง ูุฑูุฏ ุงุฏูู

### Permission System
- ุจุฑุฑุณ ุฏูู ูุฌูุฒูุง ุฏุฑ ูุฑ ุฏุฑุฎูุงุณุช
- ุฌุฏุงุณุงุฒ ุณุทูุญ ุฏุณุชุฑุณ
- ูุญุงูุธุช ุงุฒ ุนููุงุช ุญุณุงุณ

---

## ๐ฑ ูุญูู ุงุณุชูุงุฏู

### ูุฑูุฏ ุจู ูพูู
```
URL: http://localhost:5173/admin/login
Username: hossein
Password: password (ุชุบุฑ ุฏูุฏ!)
```

### ุงุฌุงุฏ ุงุฏูู ุฌุฏุฏ
```bash
cd server
node create-admin.js
```

### ุชุบุฑ ุฑูุฒ ุนุจูุฑ
```bash
cd server
node change-admin-password.js
```

---

## ๐จ ุฑุงุจุท ฺฉุงุฑุจุฑ

ูพูู ูุฏุฑุช ุดุงูู **15 ุชุจ ฺฉุงูู ู ูุนุงู**:

### ุชุจโูุง ุงุตู
1. **ุฏุงุดุจูุฑุฏ**: ููุง ฺฉู ู ุขูุงุฑ ูุญุธูโุง (Stats ูุงูุน ุงุฒ API)
2. **ุขฺฏูโูุง**: ูุฏุฑุช ฺฉุงูู ุขฺฏูโูุง ุจุง ููุชุฑ ู ุฌุณุชุฌู
3. **ฺฉุงุฑุจุฑุงู**: ูุฏุฑุช ฺฉุงุฑุจุฑุงูุ ูุณุฏูุฏุณุงุฒุ ุชูุธู ฺฉู ูพูู
4. **ุงุฑุงุฆูโุฏููุฏฺฏุงู**: ุชุฃุฏ/ุฑุฏ ุงุฑุงุฆูโุฏููุฏฺฏุงู ุฎุฏูุงุช ู ูุทุนุงุช
5. **ุชุฎููโูุง**: ูุฏุฑุช ฺฉุฏูุง ุชุฎูู ุจุง ุชูุธูุงุช ูพุดุฑูุชู
6. **ฺฏุฒุงุฑุดโูุง**: ฺฏุฒุงุฑุดโูุง ูุงูุ ฺฉุงุฑุจุฑุงู ู ุขฺฏูโูุง
7. **ุฑุณุงูู**: ูุฏุฑุช ุชุตุงูุฑ ู ูุงูโูุง ุขูพููุฏ ุดุฏู
8. **ุตูุญุงุช**: ูุฑุงุด ุตูุญุงุช ุงุณุชุงุชฺฉ (ุฏุฑุจุงุฑู ูุงุ ุชูุงุณุ ููุงูู)
9. **ุงุนูุงูโูุง**: ุงุฑุณุงู ุงุนูุงู ุนููู ุจู ฺฉุงุฑุจุฑุงู
10. **ุฏุณุชูโุจูุฏ**: ูุฏุฑุช ุฏุณุชูโุจูุฏโูุง ุชุฌูุฒุงุช ู ูุทุนุงุช
11. **ูพุงูโูุง**: ูุดุงูุฏู ู ูพุงุณุฎ ุจู ูพุงูโูุง ฺฉุงุฑุจุฑุงู
12. **ุชูุธูุงุช**: ุชูุธูุงุช ุณุณุชู (ููุชโฺฏุฐุงุฑุ ุนูููุ ุขฺฏูโูุง)
13. **ุงููุช**: ูุฏุฑุช IP ูุง ูุณุฏูุฏ ุดุฏู ู ูุงฺฏ ูุฑูุฏ
14. **ูพุดุชุจุงู**: ุฏุฑุงูุช ู ุจุงุฒุงุจ ุจฺฉโุขูพ ุฏุชุงุจุณ ู ุฑุณุงูู
15. **ูุงฺฏโูุง**: Audit logs - ุซุจุช ุชูุงู ุนููุงุช ุงุฏููโูุง

### โ ููู ุชุจโูุง ูุนุงู ู ฺฉุงุฑุจุฑุฏ ูุณุชูุฏ
- ูฺ ุชุจ placeholder ูุฌูุฏ ูุฏุงุฑุฏ
- ุชูุงู ุฏฺฉููโูุง ุจู API ูุชุตู ูุณุชูุฏ
- ุนููุงุช CRUD ฺฉุงูู ุฏุฑ ููู ุจุฎุดโูุง

---

## ๐จ ูฺฉุงุช ููู

1. **ุญุชูุงู ุฑูุฒ ุนุจูุฑ ูพุดโูุฑุถ ุฑุง ุชุบุฑ ุฏูุฏ**
2. **JWT_SECRET ุฑุง ุฏุฑ production ุชูุธู ฺฉูุฏ**
3. **ุงุฒ HTTPS ุฏุฑ production ุงุณุชูุงุฏู ฺฉูุฏ**
4. **ุจู ุทูุฑ ููุธู ุงุฒ ุฏุชุงุจุณ backup ุจฺฏุฑุฏ**
5. **Audit logs ุฑุง ุจู ุทูุฑ ูุฑุชุจ ุจุฑุฑุณ ฺฉูุฏ**

---

## ๐ ูพุดุชุจุงู

ุจุฑุง ุณูุงูุงุช ู ูุดฺฉูุงุช:
- ุงูู: support@garazhsangin.com
- ุชูฺฏุฑุงู: @garazhsangin

---

## ๐ ูฺฺฏโูุง ุขูุฏู

- [ ] ููุชูฺฉุดู Push
- [ ] ฺุช ุขููุงู ุจุง ฺฉุงุฑุจุฑุงู
- [ ] ฺฏุฒุงุฑุดโูุง ูพุดุฑูุชูโุชุฑ
- [ ] ฺฉูพุงุฑฺูโุณุงุฒ ุจุง ุณุณุชูโูุง ูพุฑุฏุงุฎุช ุจุดุชุฑ
- [ ] ุงูพูฺฉุดู ููุจุงู ุงุฏูู

---

**ูุณุฎู:** 1.0.0  
**ุชุงุฑุฎ:** 1403/08/03  
**ุชูุณุนูโุฏููุฏู:** ุชู ฺฏุงุฑุงฺ ุณูฺฏู
