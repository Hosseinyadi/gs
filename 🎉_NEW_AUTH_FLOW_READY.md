# 🎉 جریان جدید احراز هویت آماده است!

## ✅ تغییرات اعمال شد!

حالا **حتی برای ثبت‌نام با رمز عبور** هم، ابتدا شماره موبایل با OTP تایید می‌شود! 🔐

---

## 🔐 جریان جدید ثبت‌نام:

### مرحله 1️⃣: وارد کردن شماره موبایل
```
1. باز کردن: http://localhost:5173
2. کلیک "ورود/ثبت‌نام"
3. تب "رمز عبور"
4. کلیک "کاربر جدید هستید؟ ثبت‌نام کنید"
5. وارد کردن شماره: 09991253614
6. کلیک "ارسال کد تایید"
```

### مرحله 2️⃣: تایید OTP
```
7. مشاهده کد در Terminal Backend:
   📱 [MOCK OTP] to 09991253614: 123456
8. وارد کردن کد: 123456
9. کلیک "تایید"
10. ✅ پیام: "شماره موبایل تایید شد"
```

### مرحله 3️⃣: تنظیم رمز عبور و نام
```
11. وارد کردن نام: علی احمدی
12. وارد کردن رمز عبور: test123
13. تکرار رمز عبور: test123
14. کلیک "تکمیل ثبت‌نام"
15. ✅ پیام: "ثبت‌نام موفقیت‌آمیز!"
16. ✅ هدایت به /dashboard
```

---

## 🎯 مزایای جریان جدید:

### ✅ امنیت بیشتر:
- شماره موبایل با OTP تایید می‌شود
- اطمینان از اینکه کاربر واقعی است
- جلوگیری از ثبت‌نام با شماره‌های جعلی

### ✅ تجربه کاربری بهتر:
- مراحل واضح و گام به گام
- پیام‌های راهنما در هر مرحله
- امکان بازگشت و تغییر شماره

### ✅ انعطاف‌پذیری:
- ورود با رمز عبور (برای کاربران قبلی)
- ثبت‌نام با OTP + رمز عبور (برای کاربران جدید)
- ورود با OTP (بدون رمز عبور)

---

## 🧪 تست کامل:

### تست 1: ثبت‌نام کاربر جدید (با OTP)

```
1. http://localhost:5173
2. "ورود/ثبت‌نام"
3. تب "رمز عبور"
4. "کاربر جدید هستید؟"
5. شماره: 09991253614
6. "ارسال کد تایید"
7. ✅ پیام: "کد تایید ارسال شد"
8. مشاهده کد در Terminal
9. وارد کردن کد: 123456
10. "تایید"
11. ✅ پیام: "شماره تایید شد"
12. نام: علی احمدی
13. رمز: test123
14. تکرار: test123
15. "تکمیل ثبت‌نام"
16. ✅ هدایت به پنل کاربری
```

### تست 2: ورود با رمز عبور (کاربر قبلی)

```
1. خروج از حساب
2. "ورود/ثبت‌نام"
3. تب "رمز عبور"
4. شماره: 09991253614
5. رمز: test123
6. "ورود"
7. ✅ هدایت به پنل کاربری
```

### تست 3: ورود با OTP (بدون رمز عبور)

```
1. "ورود/ثبت‌نام"
2. تب "کد یکبار مصرف"
3. شماره: 09123456789
4. نام: محمد (اختیاری)
5. "ارسال کد تایید"
6. مشاهده کد در Terminal
7. وارد کردن کد
8. "تایید"
9. ✅ هدایت به پنل کاربری
```

---

## 📊 مراحل ثبت‌نام:

```
┌─────────────────────┐
│  1. وارد کردن شماره  │
└──────────┬──────────┘
           │
           ▼
┌─────────────────────┐
│  2. ارسال OTP        │
└──────────┬──────────┘
           │
           ▼
┌─────────────────────┐
│  3. تایید OTP       │
└──────────┬──────────┘
           │
           ▼
┌─────────────────────┐
│  4. تنظیم رمز و نام  │
└──────────┬──────────┘
           │
           ▼
┌─────────────────────┐
│  5. ثبت‌نام کامل    │
└─────────────────────┘
```

---

## 🔍 کد OTP کجاست؟

در Terminal Backend (پنجره سرور Node.js):
```
📱 [MOCK OTP] to 09991253614: 123456
```

---

## 💡 نکات مهم:

### برای ثبت‌نام:
- ✅ شماره موبایل با OTP تایید می‌شود
- ✅ بعد از تایید، رمز عبور و نام را وارد کنید
- ✅ رمز عبور حداقل 6 کاراکتر

### برای ورود:
- ✅ اگر قبلاً ثبت‌نام کرده‌اید، مستقیم با رمز وارد شوید
- ✅ یا از تب "کد یکبار مصرف" استفاده کنید

### امنیت:
- ✅ هر شماره باید با OTP تایید شود
- ✅ کدهای OTP 5 دقیقه اعتبار دارند
- ✅ رمز عبور با bcrypt hash می‌شود

---

## 🎊 همه چیز آماده است!

**سرورها در حال اجرا:**
- Backend: http://localhost:8080 ✅
- Frontend: http://localhost:5173 ✅

**بفرمایید تست کنید! 🚀**

جریان جدید احراز هویت با OTP اجباری برای ثبت‌نام فعال است!
